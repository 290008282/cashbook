import{d as M,r as v,w as T,o as k,f as o,h as u,j as c,k as h,l as s,m,s as n,G as x,F as w,v as C,x as q,u as S,y as B,t as F,a1 as L,S as N,T as O,N as R}from"./index-83f5659e.js";import{i as U}from"./index-6a4d2d06.js";import{t as E}from"./api.analysis-95095a50.js";const Q={class:"row-header"},W={class:"row-header queryParam"},z={class:"row-header queryParam"},I={class:"row-header queryParam"},j={class:"queryParam"},G={class:"queryParam"},$=M({__name:"TypePieChart",props:["title","style"],setup(f){const Y={flowType:"支出"},b=v([{value:"支出"},{value:"收入"},{value:"不计收支"}]),e=v(Y),d=[],i=v({tooltip:{trigger:"item"},legend:{top:"5%",left:"0",orient:"vertical",textStyle:{color:"#fff"}},toolbox:{feature:{}},series:[{name:"消费类型",type:"pie",radius:["60%","80%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,position:"center",formatter(r){return r.name+" ("+r.percent+"%)"}},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:d}]});let _,y;const p=r=>{o.startDay=e.value.startDay,o.endDay=e.value.endDay,E(r).then(t=>{if(t){if(t.length===0){console.log("TypePieChart未查询到数据！");return}d.length=0,t.forEach(l=>{d.push({value:Number(l.typeSum).toFixed(2),name:l.type})}),i.value.series[0].data=d,i.value.legend.textStyle.color=L.value.valueOf()?"#fff":"#000",document.body.clientWidth<=480&&(i.value.series[0].radius=["30%","50%"]),_=document.getElementById("typePieDiv"),y=U(_),y.setOption(i.value),y.on("click",function(l){N(),o.startDay=e.value.startDay,o.endDay=e.value.endDay,o.type=l.name,o.flowType=e.value.flowType,O.value.visible=!0})}})};return T(e.value,()=>{p(e.value)}),k(()=>{e.value.startDay=o.startDay,e.value.endDay=o.endDay,p(e.value)}),(r,t)=>{const l=u("el-date-picker"),P=u("el-option"),V=u("el-select"),D=u("el-row"),g=u("el-button");return c(),h(w,null,[s(D,{class:"queryRow"},{default:m(()=>[n("h4",Q,x(f.title),1),n("div",W,[s(l,{modelValue:e.value.startDay,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.startDay=a),type:"date",style:{width:"auto"},format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",placeholder:"开始时间"},null,8,["modelValue"])]),n("div",z,[s(l,{modelValue:e.value.endDay,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.endDay=a),style:{width:"auto"},type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",placeholder:"结束时间"},null,8,["modelValue"])]),n("div",I,[s(V,{modelValue:e.value.flowType,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.flowType=a),class:"m-2",placeholder:"流水类型"},{default:m(()=>[(c(!0),h(w,null,C(b.value,a=>(c(),q(P,{key:a.value,label:a.value,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),s(D,{class:"mini-buttons"},{default:m(()=>[n("div",j,[s(l,{modelValue:e.value.endDay,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.endDay=a),type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",placeholder:"结束时间"},null,8,["modelValue"])]),n("div",G,[s(g,{icon:S(B),circle:"",onClick:t[4]||(t[4]=a=>p(e.value))},null,8,["icon"])])]),_:1}),n("div",{id:"typePieDiv",style:F(f.style)},null,4)],64)}}});const K=R($,[["__scopeId","data-v-62e98346"]]);export{K as default};
